<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Site Blocked - Family Privacy Extension</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #333;
    }

    .container {
      background: white;
      max-width: 600px;
      width: 90%;
      border-radius: 16px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.1);
      overflow: hidden;
      text-align: center;
    }

    .header {
      background: linear-gradient(135deg, #ff6b6b, #ee5a24);
      color: white;
      padding: 40px 30px;
    }

    .header .icon {
      font-size: 64px;
      margin-bottom: 20px;
      display: block;
    }

    .header h1 {
      font-size: 28px;
      font-weight: 600;
      margin-bottom: 10px;
    }

    .header p {
      font-size: 16px;
      opacity: 0.9;
    }

    .content {
      padding: 40px 30px;
    }

    .blocked-info {
      background: #f8f9fa;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 30px;
      border-left: 4px solid #dc3545;
    }

    .blocked-domain {
      font-family: monospace;
      font-size: 18px;
      font-weight: 600;
      color: #dc3545;
      margin-bottom: 10px;
    }

    .blocked-reason {
      color: #6c757d;
      font-size: 14px;
    }

    .actions {
      display: flex;
      gap: 15px;
      justify-content: center;
      flex-wrap: wrap;
      margin-bottom: 30px;
    }

    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      text-decoration: none;
      display: inline-block;
    }

    .btn-primary {
      background: #667eea;
      color: white;
    }

    .btn-primary:hover {
      background: #5a6fd8;
    }

    .btn-secondary {
      background: #6c757d;
      color: white;
    }

    .btn-secondary:hover {
      background: #5a6268;
    }

    .btn-success {
      background: #28a745;
      color: white;
    }

    .btn-success:hover {
      background: #218838;
    }

    .alternatives {
      background: #e3f2fd;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
    }

    .alternatives h3 {
      color: #1976d2;
      margin-bottom: 15px;
    }

    .alternatives-list {
      display: grid;
      gap: 10px;
    }

    .alternative-item {
      background: white;
      padding: 12px;
      border-radius: 6px;
      border: 1px solid #bbdefb;
    }

    .alternative-item a {
      text-decoration: none;
      color: #1976d2;
      font-weight: 500;
    }

    .alternative-item a:hover {
      text-decoration: underline;
    }

    .footer {
      border-top: 1px solid #e9ecef;
      padding: 20px;
      color: #6c757d;
      font-size: 12px;
    }

    .time-info {
      background: #fff3cd;
      border: 1px solid #ffeaa7;
      border-radius: 6px;
      padding: 15px;
      margin-bottom: 20px;
      color: #856404;
    }

    .safety-tips {
      text-align: left;
      background: #d1ecf1;
      border: 1px solid #bee5eb;
      border-radius: 6px;
      padding: 20px;
      margin-top: 20px;
    }

    .safety-tips h4 {
      color: #0c5460;
      margin-bottom: 10px;
    }

    .safety-tips ul {
      margin-left: 20px;
      color: #0c5460;
    }

    .safety-tips li {
      margin-bottom: 5px;
    }

    @media (max-width: 768px) {
      .container {
        width: 95%;
        margin: 20px;
      }
      
      .header {
        padding: 30px 20px;
      }
      
      .content {
        padding: 30px 20px;
      }
      
      .actions {
        flex-direction: column;
      }
      
      .btn {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <span class="icon">üõ°Ô∏è</span>
      <h1>Access Blocked</h1>
      <p>This website has been blocked by Family Privacy Extension</p>
    </div>

    <div class="content">
      <div class="blocked-info">
        <div class="blocked-domain" id="blockedDomain">example.com</div>
        <div class="blocked-reason" id="blockedReason">This site was blocked due to content restrictions.</div>
      </div>

      <div id="timeRestrictionInfo" class="time-info" style="display: none;">
        <strong>‚è∞ Time Restriction Active</strong><br>
        Browsing is currently restricted outside of allowed hours.
      </div>

      <div class="actions">
        <button id="goBack" class="btn btn-primary">‚Üê Go Back</button>
        <button id="requestAccess" class="btn btn-success">Request Access</button>
        <button id="openSettings" class="btn btn-secondary">‚öôÔ∏è Settings</button>
      </div>

      <div class="alternatives">
        <h3>üìö Suggested Alternatives</h3>
        <div class="alternatives-list" id="alternativesList">
          <div class="alternative-item">
            <a href="https://www.khanacademy.org" target="_blank">Khan Academy - Free Learning</a>
          </div>
          <div class="alternative-item">
            <a href="https://www.nationalgeographic.com" target="_blank">National Geographic</a>
          </div>
          <div class="alternative-item">
            <a href="https://www.ted.com" target="_blank">TED Talks</a>
          </div>
        </div>
      </div>

      <div class="safety-tips">
        <h4>üîí Internet Safety Tips</h4>
        <ul>
          <li>Always verify the authenticity of websites before sharing personal information</li>
          <li>Be cautious of pop-ups and suspicious download links</li>
          <li>Use strong, unique passwords for all your accounts</li>
          <li>Think before you click - if something seems too good to be true, it probably is</li>
          <li>Talk to a trusted adult if you encounter inappropriate content</li>
        </ul>
      </div>
    </div>

    <div class="footer">
      <p>Protected by Family Privacy Extension</p>
      <p>If you believe this is an error, please contact your administrator</p>
    </div>
  </div>

  <script>
    // Parse URL parameters
    const urlParams = new URLSearchParams(window.location.search);
    const reason = urlParams.get('reason') || 'content_restriction';
    const domain = urlParams.get('domain') || 'unknown';

    // Update page content
    document.getElementById('blockedDomain').textContent = domain;

    // Set reason-specific content
    const reasonMessages = {
      'blocked_category_adult': 'This site contains adult content that is restricted.',
      'blocked_category_gambling': 'This site contains gambling content that is restricted.',
      'blocked_category_violence': 'This site contains violent content that is restricted.',
      'blocked_category_drugs': 'This site contains drug-related content that is restricted.',
      'blocked_category_weapons': 'This site contains weapons-related content that is restricted.',
      'blocked_category_social': 'Social media access is currently restricted.',
      'blocked_category_entertainment': 'Entertainment content is currently restricted.',
      'blocked_category_gaming': 'Gaming websites are currently restricted.',
      'blocked_category_spam': 'This site has been identified as spam or malicious.',
      'blocked_category_phishing': 'This site has been identified as a phishing attempt.',
      'blocked_category_malware': 'This site has been identified as containing malware.',
      'explicitly_blocked': 'This site has been manually blocked.',
      'time_restriction': 'Browsing is currently restricted outside of allowed hours.',
      'content_restriction': 'This site has been blocked due to content restrictions.'
    };

    document.getElementById('blockedReason').textContent = 
      reasonMessages[reason] || reasonMessages['content_restriction'];

    // Show time restriction info if applicable
    if (reason === 'time_restriction') {
      document.getElementById('timeRestrictionInfo').style.display = 'block';
    }

    // Update alternatives based on blocked category
    function updateAlternatives() {
      const alternatives = {
        'blocked_category_social': [
          { name: 'Discord (Educational Servers)', url: 'https://discord.com' },
          { name: 'Microsoft Teams', url: 'https://teams.microsoft.com' },
          { name: 'Google Classroom', url: 'https://classroom.google.com' }
        ],
        'blocked_category_entertainment': [
          { name: 'Educational Videos on YouTube', url: 'https://www.youtube.com/education' },
          { name: 'TED-Ed', url: 'https://ed.ted.com' },
          { name: 'Khan Academy', url: 'https://www.khanacademy.org' }
        ],
        'blocked_category_gaming': [
          { name: 'Educational Games - Prodigy Math', url: 'https://www.prodigygame.com' },
          { name: 'Typing Games', url: 'https://www.typing.com' },
          { name: 'Programming Games - CodeCombat', url: 'https://codecombat.com' }
        ]
      };

      const categoryAlternatives = alternatives[reason];
      if (categoryAlternatives) {
        const list = document.getElementById('alternativesList');
        list.innerHTML = categoryAlternatives.map(alt => `
          <div class="alternative-item">
            <a href="${alt.url}" target="_blank">${alt.name}</a>
          </div>
        `).join('');
      }
    }

    updateAlternatives();

    // Event listeners
    document.getElementById('goBack').addEventListener('click', () => {
      history.back();
    });

    document.getElementById('requestAccess').addEventListener('click', () => {
      // In a real implementation, this could send a request to parents/administrators
      alert('Access request sent! A notification has been sent to your administrator.');
    });

    document.getElementById('openSettings').addEventListener('click', () => {
      chrome.runtime.openOptionsPage();
    });

    // Update time periodically for time-based restrictions
    if (reason === 'time_restriction') {
      setInterval(() => {
        const now = new Date();
        const timeStr = now.toLocaleTimeString();
        const timeInfo = document.getElementById('timeRestrictionInfo');
        timeInfo.innerHTML = `
          <strong>‚è∞ Time Restriction Active</strong><br>
          Current time: ${timeStr}<br>
          Browsing is currently restricted outside of allowed hours.
        `;
      }, 1000);
    }
  </script>
</body>
</html>
